(this["webpackJsonpapp-react-redux-api"]=this["webpackJsonpapp-react-redux-api"]||[]).push([[0],{18:function(e,t,a){e.exports=a(39)},29:function(e,t,a){},31:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(6),l=a.n(c),i=a(1),o=(a(29),a(12)),s=a.n(o),m=a(15),u=a(8),E=(a(31),a(17)),d=a(2),v=a(4),_=a(16),f=function(e){return e.movies},p=function(e){return e.searchTitle},b=function(e){return e.loading},g=function(e){return e.currentPage},h=function(e){return e.moviesPerPage},N=function(e){return e.totalMovies},O=function(e){return e.preview},j=function(e){return e.history},S=function(e){return{type:"SET_MOVIES",movies:e}},y=function(e){return{type:"DELETE_MOVIE",imdbID:e}},T=function(e){return{type:"SET_CURRENT_PAGE",pageNumber:e}},I=function(e){return{type:"SET_LOADING",payload:e}},M=function(e){return{type:"SET_SEARCH_TITLE",query:e}},D=function(e){return{type:"SET_TOTAL_MOVIES",totalMovies:e}},P=function(e){return{type:"SET_PREVIEW",movieDesc:e}},w=function(e){return{type:"SET_HISTORY",query:e}},R=sessionStorage.getItem("moviesStore")?function(){try{var e=sessionStorage.getItem("moviesStore");if(null===e)return;return JSON.parse(e)}catch(t){return}}():{movies:[],searchTitle:"",loading:!1,currentPage:1,moviesPerPage:10,totalMovies:0,preview:null,history:[]},k=Object(v.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MOVIES":return Object(d.a)(Object(d.a)({},e),{},{movies:t.movies});case"DELETE_MOVIE":return Object(d.a)(Object(d.a)({},e),{},{movies:e.movies.filter((function(e){return e.imdbID!==t.imdbID}))});case"SET_CURRENT_PAGE":return Object(d.a)(Object(d.a)({},e),{},{currentPage:t.pageNumber});case"SET_LOADING":return Object(d.a)(Object(d.a)({},e),{},{loading:t.payload});case"SET_SEARCH_TITLE":return Object(d.a)(Object(d.a)({},e),{},{searchTitle:t.query});case"SET_TOTAL_MOVIES":return Object(d.a)(Object(d.a)({},e),{},{totalMovies:t.totalMovies});case"SET_PREVIEW":return Object(d.a)(Object(d.a)({},e),{},{preview:t.movieDesc});case"SET_HISTORY":return Object(d.a)(Object(d.a)({},e),{},{history:[].concat(Object(E.a)(e.history),[t.query])});default:return e}}),Object(_.composeWithDevTools)());k.subscribe((function(){!function(e){try{var t=JSON.stringify(e);sessionStorage.setItem("moviesStore",t)}catch(a){}}(k.getState())}));var C=k,A=(a(32),a(33),a(3)),F=a.n(A),L=function(e){var t=e.Title,a=e.Description,c=e.Poster,l=(e.imdbUrl,e.imdbID),o=e.handleSelect,s=Object(n.useState)(!1),m=Object(u.a)(s,2),E=m[0],d=m[1],v=Object(i.b)();return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:F()("card__container",{"is-flipped":E})},r.a.createElement("figure",{className:"card__face card__face--front "},r.a.createElement("img",{src:c,alt:"Film logo",className:"card__image"})),r.a.createElement("div",{className:"card__face card__face--back "},r.a.createElement("div",{className:"media-content"},r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"title"},t),r.a.createElement("p",{className:"title"},"imdbID: ".concat(l)))),r.a.createElement("div",{className:"content"},a,r.a.createElement("br",null),r.a.createElement("a",{href:"https://www.imdb.com/title/".concat(l)},"IMDB")))),r.a.createElement("div",{className:"card__content"},r.a.createElement("div",{className:"card__content--buttons"},r.a.createElement("button",{type:"button",className:"card__content--button",onClick:function(){d(!E),o(t)}},"Show more"),r.a.createElement("button",{type:"button",className:"card__content--button",onClick:function(){v(y(l))}},"Delete film"))))},V=(a(34),function(){return r.a.createElement("div",{className:"Loader"},r.a.createElement("div",{className:"Loader__content"}))}),x="https://www.omdbapi.com/";function G(e,t){return fetch("".concat(x,"?apikey=d905f6c1&s=").concat(e,"&page=").concat(t)).then((function(e){return e.json()}))}var q=function(e){var t=e.movies,a=e.loading,n=Object(i.b)();if(a)return r.a.createElement(V,null);var c=function(e){var t;(t=e,fetch("".concat(x,"?apikey=d905f6c1&t=").concat(t)).then((function(e){return e.json()}))).then((function(e){return n(P(e))}))};return r.a.createElement("div",{className:"movies"},t.map((function(e){return r.a.createElement(L,Object.assign({key:e.imdbID},e,{handleSelect:c}))})))},W=(a(35),function(){var e=Object(i.c)(O);return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"details__header"},"More details"),null!==e?r.a.createElement("div",{className:"details"},r.a.createElement("div",null,r.a.createElement("figure",{className:"details__figure"},r.a.createElement("img",{className:"details__image",src:e.Poster,alt:"Film logo"}))),r.a.createElement("div",{className:"details__content"},r.a.createElement("div",{className:"details__media"},r.a.createElement("div",{className:"media-content"},r.a.createElement("p",{className:"details__title"},e.Title))),r.a.createElement("div",{className:"details__content--bottom"},r.a.createElement("p",null,r.a.createElement("strong",null,"Actors: "),e.Actors),r.a.createElement("p",null,r.a.createElement("strong",null,"Awards: "),e.Awards),r.a.createElement("p",null,r.a.createElement("strong",null,"Country: "),e.Country," ",r.a.createElement("strong",null,"Language: "),e.Language),r.a.createElement("p",null,r.a.createElement("strong",null,"Director: "),e.Director," ",r.a.createElement("strong",null,"Writer: "),e.Writer),r.a.createElement("p",null,r.a.createElement("strong",null,"Genre: "),e.Genre),r.a.createElement("p",null,r.a.createElement("strong",null,"Production: "),e.Production),r.a.createElement("p",null,r.a.createElement("strong",null,"Runtime: "),e.Runtime),r.a.createElement("p",null,r.a.createElement("strong",null,"Released: "),e.Released),r.a.createElement("p",null,r.a.createElement("strong",null,"imdbRating: "),e.imdbRating," ",r.a.createElement("strong",null,"imdbVotes: "),e.imdbVotes),r.a.createElement("p",null,r.a.createElement("strong",null,"Description: "),e.Plot)))):r.a.createElement("p",{className:"details__bottom"},"Click on the movie to show more"))}),H=(a(36),a(37),function(){var e=Object(i.c)(j);return r.a.createElement("div",{className:"history"},e.map((function(e,t){return r.a.createElement("div",{key:t,className:"history__query"},"".concat(e," >"))})))}),J=function(e){var t=e.searchMovies,a=e.notFound,n=e.setNotFound,c=Object(i.b)(),l=Object(i.c)(p),o=Object(i.c)(g);return r.a.createElement("div",{className:"header"},r.a.createElement("form",{className:"finder__form",onSubmit:function(e){e.preventDefault(),c(w(l)),t(l,o),c(T(1))},autoComplete:"off"},r.a.createElement("div",{className:"header__field"},r.a.createElement("label",{className:"header__label",htmlFor:"movie-title"},"Movies searching"),r.a.createElement("div",{className:"header__control"},r.a.createElement("input",{type:"text",id:"movie-title",placeholder:"Enter a title to search...",className:F()({header__input:!0,"header__input--is-danger":a}),value:l,onChange:function(e){c(M(e.target.value)),n(!1)}})),a&&r.a.createElement("p",{className:"header__help is-danger"},"Can't find a movie with such a title")),r.a.createElement("div",{className:"header__field"},r.a.createElement("div",{className:"header__control"},r.a.createElement("button",{type:"submit",className:"header__button is-light"},"Find movies"),r.a.createElement(H,null)))))},U=(a(38),function(e){var t=e.moviesPerPage,a=e.totalMovies,n=e.paginate,c=e.searchMovies,l=Object(i.c)(g),o=Object(i.c)(p),s=[];return function(e,t,a){if(t>10)if(a>5)for(var n=a-4;n<=a+5&&(e.push(n),n!==t);n++);else for(var r=1;r<=10&&(e.push(r),r!==t);r++);else for(var c=1;c<=t;c++)e.push(c)}(s,Math.ceil(a/t),l),r.a.createElement("div",{className:"pagination"},r.a.createElement("nav",{className:"pagination__nav"},r.a.createElement("div",{className:"pagination__pages"},s.map((function(e){return r.a.createElement("div",{key:e,className:F()("pagination__page",{"pagination__current-page":l===e}),onClick:function(){n(e),c(o,e)}},e)})))))}),B=function(){var e=Object(i.b)(),t=Object(i.c)(f),a=Object(i.c)(b),c=Object(i.c)(h),l=Object(i.c)(N),o=Object(n.useState)(!1),E=Object(u.a)(o,2),d=E[0],v=E[1],_=function(){var t=Object(m.a)(s.a.mark((function t(a,n){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,G(a,n);case 2:r=t.sent,e(I(!0)),"False"===r.Response?v(!0):(e(S(r.Search)),e(D(+r.totalResults)),e(I(!1))),e(I(!1));case 6:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(J,{searchMovies:_,notFound:d,setNotFound:v}),r.a.createElement("div",{className:"page"},r.a.createElement("div",{className:"page__content"},r.a.createElement(q,{movies:t,loading:a}),r.a.createElement("div",{className:"page__pagination"},r.a.createElement(U,{moviesPerPage:c,totalMovies:l,paginate:function(t){return e(T(t))},searchMovies:_}))),r.a.createElement("div",{className:"page__sidebar"},r.a.createElement(W,null))))};l.a.render(r.a.createElement(i.a,{store:C},r.a.createElement(B,null)),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.28e8ca60.chunk.js.map